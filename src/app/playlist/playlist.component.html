<div class="loading-shade" *ngIf="isLoadingResults">
    <mat-spinner *ngIf="isLoadingResults"></mat-spinner>
</div>
<ng-template [ngIf]="!isLoadingResults">
    <h2>{{title}}</h2>
    <mat-tab-group class="playlist__tab">
        <mat-tab label="TO WATCH">
            <div *ngIf="moviesToWatch.length > 0; else noData">
                <mat-nav-list *ngFor="let movie of moviesToWatch">
                    <a mat-list-item [routerLink]="['/movies/movie', movie.movieId]">
                        <div matListAvatar class="icon-container" [ngStyle]="{'background-image': 'url('+'https://image.tmdb.org/t/p/original'+movie.poster_path+')'}">
                            <mat-icon *ngIf="!movie.poster_path" class="icon-movie">movie</mat-icon>
                        </div>
                        <h3 matLine>{{movie.original_title}}</h3>
                        <p matLine>{{movie.release_date | date}}</p>
                    </a>
                    <div class="actions">
                        <button mat-icon-button [matMenuTriggerFor]="menu">
                            <mat-icon>more_vert</mat-icon>
                        </button>
                        <mat-menu #menu="matMenu">
                            <button mat-menu-item (click)="shareDialog(movie)">
                                <mat-icon>share</mat-icon>
                                <span>Share</span>
                            </button>
                            <button mat-menu-item (click)="deleteMovie(movie.movieId)">
                                <mat-icon>delete</mat-icon>
                                <span>Delete</span>
                            </button>
                            <button mat-menu-item (click)="watchedMovie(movie.movieId, true)">
                                <mat-icon>visibility</mat-icon>
                                <span>Watched</span>
                            </button>
                        </mat-menu>
                    </div>
                </mat-nav-list>
            </div>
            <ng-template #noData>
                <h3>No Movies
                    <mat-icon>sentiment_very_dissatisfied</mat-icon>
                </h3>
            </ng-template>
        </mat-tab>
        <mat-tab label="WATCHED">
            <div *ngIf="moviesWatched.length > 0, else noData">
                <mat-nav-list *ngFor="let movie of moviesWatched">
                    <a mat-list-item [routerLink]="['/movies/movie', movie.movieId]">
                        <div matListAvatar class="icon-container" [ngStyle]="{'background-image': 'url('+'https://image.tmdb.org/t/p/original'+movie.poster_path+')'}">
                            <mat-icon *ngIf="!movie.poster_path" class="icon-movie">movie</mat-icon>
                        </div>
                        <h3 matLine>{{movie.original_title}}</h3>
                        <p matLine>{{movie.release_date | date}}</p>
                    </a>
                    <div class="actions">
                        <button mat-icon-button [matMenuTriggerFor]="menu">
                            <mat-icon>more_vert</mat-icon>
                        </button>
                        <mat-menu #menu="matMenu">
                            <button mat-menu-item (click)="shareDialog(movie)">
                                <mat-icon>share</mat-icon>
                                <span>Share</span>
                            </button>
                            <button mat-menu-item (click)="deleteMovie(movie.movieId)">
                                <mat-icon>delete</mat-icon>
                                <span>Delete</span>
                            </button>
                            <button mat-menu-item (click)="watchedMovie(movie.movieId, false)">
                                <mat-icon>visibility_off</mat-icon>
                                <span>Not watched</span>
                            </button>
                        </mat-menu>
                    </div>
                </mat-nav-list>
            </div>
            <ng-template #nodata>
                <h3>No movies
                    <mat-icon>sentiment_very_dissatisfied</mat-icon>
                </h3>
            </ng-template>
        </mat-tab>
    </mat-tab-group>
</ng-template>